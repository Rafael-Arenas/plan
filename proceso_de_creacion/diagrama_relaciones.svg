<svg width="1200" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .table-box { fill: #f8f9fa; stroke: #343a40; stroke-width: 2; }
      .primary-table { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .junction-table { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .table-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #212529; }
      .table-field { font-family: Arial, sans-serif; font-size: 11px; fill: #495057; }
      .pk-field { font-weight: bold; fill: #d32f2f; }
      .fk-field { font-style: italic; fill: #1976d2; }
      .relationship-line { stroke: #6c757d; stroke-width: 2; fill: none; }
      .one-to-many { stroke: #28a745; stroke-width: 2; }
      .many-to-many { stroke: #dc3545; stroke-width: 2; stroke-dasharray: 5,5; }
    </style>
  </defs>
  
  <!-- CLIENT Table -->
  <rect x="50" y="50" width="180" height="160" class="primary-table"/>
  <text x="140" y="70" text-anchor="middle" class="table-title">CLIENT</text>
  <text x="60" y="90" class="table-field pk-field">id (PK)</text>
  <text x="60" y="105" class="table-field">name (UK)</text>
  <text x="60" y="120" class="table-field">code (UK)</text>
  <text x="60" y="135" class="table-field">contact_person</text>
  <text x="60" y="150" class="table-field">email</text>
  <text x="60" y="165" class="table-field">phone</text>
  <text x="60" y="180" class="table-field">is_active</text>
  <text x="60" y="195" class="table-field">notes</text>
  
  <!-- PROJECT Table -->
  <rect x="300" y="50" width="200" height="180" class="primary-table"/>
  <text x="400" y="70" text-anchor="middle" class="table-title">PROJECT</text>
  <text x="310" y="90" class="table-field pk-field">id (PK)</text>
  <text x="310" y="105" class="table-field">reference (UK)</text>
  <text x="310" y="120" class="table-field">trigram (UK)</text>
  <text x="310" y="135" class="table-field">name</text>
  <text x="310" y="150" class="table-field fk-field">client_id (FK)</text>
  <text x="310" y="165" class="table-field">start_date</text>
  <text x="310" y="180" class="table-field">end_date</text>
  <text x="310" y="195" class="table-field">status</text>
  <text x="310" y="210" class="table-field">priority</text>
  <text x="310" y="225" class="table-field">...</text>
  
  <!-- EMPLOYEE Table -->
  <rect x="50" y="280" width="180" height="180" class="primary-table"/>
  <text x="140" y="300" text-anchor="middle" class="table-title">EMPLOYEE</text>
  <text x="60" y="320" class="table-field pk-field">id (PK)</text>
  <text x="60" y="335" class="table-field">first_name</text>
  <text x="60" y="350" class="table-field">last_name</text>
  <text x="60" y="365" class="table-field">full_name</text>
  <text x="60" y="380" class="table-field">employee_code (UK)</text>
  <text x="60" y="395" class="table-field">email (UK)</text>
  <text x="60" y="410" class="table-field">position</text>
  <text x="60" y="425" class="table-field">status</text>
  <text x="60" y="440" class="table-field">is_available</text>
  <text x="60" y="455" class="table-field">...</text>
  
  <!-- TEAM Table -->
  <rect x="300" y="280" width="180" height="140" class="primary-table"/>
  <text x="390" y="300" text-anchor="middle" class="table-title">TEAM</text>
  <text x="310" y="320" class="table-field pk-field">id (PK)</text>
  <text x="310" y="335" class="table-field">name (UK)</text>
  <text x="310" y="350" class="table-field">code (UK)</text>
  <text x="310" y="365" class="table-field">description</text>
  <text x="310" y="380" class="table-field">color</text>
  <text x="310" y="395" class="table-field">max_members</text>
  <text x="310" y="410" class="table-field">...</text>
  
  <!-- TEAM_MEMBERSHIP Table (Junction) -->
  <rect x="550" y="280" width="200" height="140" class="junction-table"/>
  <text x="650" y="300" text-anchor="middle" class="table-title">TEAM_MEMBERSHIP</text>
  <text x="560" y="320" class="table-field pk-field">id (PK)</text>
  <text x="560" y="335" class="table-field fk-field">employee_id (FK)</text>
  <text x="560" y="350" class="table-field fk-field">team_id (FK)</text>
  <text x="560" y="365" class="table-field">role</text>
  <text x="560" y="380" class="table-field">start_date</text>
  <text x="560" y="395" class="table-field">end_date</text>
  <text x="560" y="410" class="table-field">is_active</text>
  
  <!-- PROJECT_ASSIGNMENT Table (Junction) -->
  <rect x="550" y="50" width="220" height="160" class="junction-table"/>
  <text x="660" y="70" text-anchor="middle" class="table-title">PROJECT_ASSIGNMENT</text>
  <text x="560" y="90" class="table-field pk-field">id (PK)</text>
  <text x="560" y="105" class="table-field fk-field">employee_id (FK)</text>
  <text x="560" y="120" class="table-field fk-field">project_id (FK)</text>
  <text x="560" y="135" class="table-field">start_date</text>
  <text x="560" y="150" class="table-field">end_date</text>
  <text x="560" y="165" class="table-field">allocated_hours_per_day</text>
  <text x="560" y="180" class="table-field">percentage_allocation</text>
  <text x="560" y="195" class="table-field">role_in_project</text>
  <text x="560" y="210" class="table-field">...</text>
  
  <!-- SCHEDULE Table -->
  <rect x="800" y="50" width="180" height="180" class="table-box"/>
  <text x="890" y="70" text-anchor="middle" class="table-title">SCHEDULE</text>
  <text x="810" y="90" class="table-field pk-field">id (PK)</text>
  <text x="810" y="105" class="table-field fk-field">employee_id (FK)</text>
  <text x="810" y="120" class="table-field fk-field">project_id (FK)</text>
  <text x="810" y="135" class="table-field fk-field">team_id (FK)</text>
  <text x="810" y="150" class="table-field fk-field">status_code_id (FK)</text>
  <text x="810" y="165" class="table-field">date</text>
  <text x="810" y="180" class="table-field">start_time</text>
  <text x="810" y="195" class="table-field">end_time</text>
  <text x="810" y="210" class="table-field">description</text>
  <text x="810" y="225" class="table-field">...</text>
  
  <!-- STATUS_CODE Table -->
  <rect x="800" y="280" width="180" height="140" class="table-box"/>
  <text x="890" y="300" text-anchor="middle" class="table-title">STATUS_CODE</text>
  <text x="810" y="320" class="table-field pk-field">id (PK)</text>
  <text x="810" y="335" class="table-field">code (UK)</text>
  <text x="810" y="350" class="table-field">name</text>
  <text x="810" y="365" class="table-field">description</text>
  <text x="810" y="380" class="table-field">color</text>
  <text x="810" y="395" class="table-field">is_billable</text>
  <text x="810" y="410" class="table-field">...</text>
  
  <!-- VACATION Table -->
  <rect x="50" y="500" width="180" height="160" class="table-box"/>
  <text x="140" y="520" text-anchor="middle" class="table-title">VACATION</text>
  <text x="60" y="540" class="table-field pk-field">id (PK)</text>
  <text x="60" y="555" class="table-field fk-field">employee_id (FK)</text>
  <text x="60" y="570" class="table-field">start_date</text>
  <text x="60" y="585" class="table-field">end_date</text>
  <text x="60" y="600" class="table-field">vacation_type</text>
  <text x="60" y="615" class="table-field">status</text>
  <text x="60" y="630" class="table-field">total_days</text>
  <text x="60" y="645" class="table-field">business_days</text>
  <text x="60" y="660" class="table-field">...</text>
  
  <!-- WORKLOAD Table -->
  <rect x="300" y="500" width="180" height="160" class="table-box"/>
  <text x="390" y="520" text-anchor="middle" class="table-title">WORKLOAD</text>
  <text x="310" y="540" class="table-field pk-field">id (PK)</text>
  <text x="310" y="555" class="table-field fk-field">employee_id (FK)</text>
  <text x="310" y="570" class="table-field fk-field">project_id (FK)</text>
  <text x="310" y="585" class="table-field">date</text>
  <text x="310" y="600" class="table-field">planned_hours</text>
  <text x="310" y="615" class="table-field">actual_hours</text>
  <text x="310" y="630" class="table-field">utilization_%</text>
  <text x="310" y="645" class="table-field">efficiency_score</text>
  <text x="310" y="660" class="table-field">...</text>
  
  <!-- CHANGE_LOG Table -->
  <rect x="550" y="500" width="200" height="180" class="table-box"/>
  <text x="650" y="520" text-anchor="middle" class="table-title">CHANGE_LOG</text>
  <text x="560" y="540" class="table-field pk-field">id (PK)</text>
  <text x="560" y="555" class="table-field">entity_type</text>
  <text x="560" y="570" class="table-field">entity_id</text>
  <text x="560" y="585" class="table-field">action</text>
  <text x="560" y="600" class="table-field">field_name</text>
  <text x="560" y="615" class="table-field">old_value</text>
  <text x="560" y="630" class="table-field">new_value</text>
  <text x="560" y="645" class="table-field">changed_by</text>
  <text x="560" y="660" class="table-field">change_date</text>
  <text x="560" y="675" class="table-field">...</text>
  
  <!-- ALERT Table -->
  <rect x="800" y="500" width="180" height="200" class="table-box"/>
  <text x="890" y="520" text-anchor="middle" class="table-title">ALERT</text>
  <text x="810" y="540" class="table-field pk-field">id (PK)</text>
  <text x="810" y="555" class="table-field">alert_type</text>
  <text x="810" y="570" class="table-field">priority</text>
  <text x="810" y="585" class="table-field">title</text>
  <text x="810" y="600" class="table-field">message</text>
  <text x="810" y="615" class="table-field fk-field">project_id (FK)</text>
  <text x="810" y="630" class="table-field fk-field">employee_id (FK)</text>
  <text x="810" y="645" class="table-field fk-field">schedule_id (FK)</text>
  <text x="810" y="660" class="table-field">is_active</text>
  <text x="810" y="675" class="table-field">is_acknowledged</text>
  <text x="810" y="690" class="table-field">...</text>
  
  <!-- Relationships -->
  
  <!-- CLIENT to PROJECT (1:N) -->
  <line x1="230" y1="120" x2="300" y2="150" class="relationship-line one-to-many"/>
  <text x="265" y="130" class="table-field" font-size="10">1:N</text>
  
  <!-- EMPLOYEE to TEAM_MEMBERSHIP (1:N) -->
  <line x1="230" y1="350" x2="550" y2="350" class="relationship-line many-to-many"/>
  <text x="390" y="340" class="table-field" font-size="10">N:M</text>
  
  <!-- TEAM to TEAM_MEMBERSHIP (1:N) -->
  <line x1="480" y1="350" x2="550" y2="350" class="relationship-line many-to-many"/>
  
  <!-- EMPLOYEE to PROJECT_ASSIGNMENT (1:N) -->
  <path d="M 230 320 Q 400 250 550 130" class="relationship-line many-to-many"/>
  <text x="390" y="270" class="table-field" font-size="10">N:M</text>
  
  <!-- PROJECT to PROJECT_ASSIGNMENT (1:N) -->
  <line x1="500" y1="130" x2="550" y2="130" class="relationship-line many-to-many"/>
  
  <!-- EMPLOYEE to SCHEDULE (1:N) -->
  <path d="M 230 380 Q 500 300 800 150" class="relationship-line one-to-many"/>
  <text x="500" y="320" class="table-field" font-size="10">1:N</text>
  
  <!-- PROJECT to SCHEDULE (1:N) -->
  <path d="M 500 150 Q 650 100 800 120" class="relationship-line one-to-many"/>
  
  <!-- TEAM to SCHEDULE (1:N) -->
  <path d="M 480 320 Q 640 250 800 135" class="relationship-line one-to-many"/>
  
  <!-- STATUS_CODE to SCHEDULE (1:N) -->
  <line x1="890" y1="280" x2="890" y2="230" class="relationship-line one-to-many"/>
  <text x="900" y="255" class="table-field" font-size="10">1:N</text>
  
  <!-- EMPLOYEE to VACATION (1:N) -->
  <line x1="140" y1="460" x2="140" y2="500" class="relationship-line one-to-many"/>
  <text x="150" y="480" class="table-field" font-size="10">1:N</text>
  
  <!-- EMPLOYEE to WORKLOAD (1:N) -->
  <path d="M 230 420 Q 265 460 300 580" class="relationship-line one-to-many"/>
  <text x="250" y="500" class="table-field" font-size="10">1:N</text>
  
  <!-- PROJECT to WORKLOAD (1:N) -->
  <path d="M 400 230 Q 400 350 390 500" class="relationship-line one-to-many"/>
  <text x="410" y="365" class="table-field" font-size="10">1:N</text>
  
  <!-- PROJECT to ALERT (1:N) -->
  <path d="M 500 150 Q 650 300 800 615" class="relationship-line one-to-many"/>
  <text x="650" y="380" class="table-field" font-size="10">1:N</text>
  
  <!-- EMPLOYEE to ALERT (1:N) -->
  <path d="M 230 400 Q 500 450 800 630" class="relationship-line one-to-many"/>
  <text x="500" y="515" class="table-field" font-size="10">1:N</text>
  
  <!-- SCHEDULE to ALERT (1:N) -->
  <line x1="890" y1="230" x2="890" y2="500" class="relationship-line one-to-many"/>
  <text x="900" y="365" class="table-field" font-size="10">1:N</text>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="1000" y="50" width="200" height="280" fill="#f8f9fa" stroke="#343a40" stroke-width="1" rx="5"/>
    <text x="1100" y="70" text-anchor="middle" font-weight="bold" font-size="14" fill="#212529">LEYENDA</text>
    
    <rect x="1010" y="80" width="15" height="10" fill="#e3f2fd" stroke="#2196f3"/>
    <text x="1030" y="88" font-size="10" fill="#333">Entidades Principales</text>
    
    <rect x="1010" y="95" width="15" height="10" fill="#f3e5f5" stroke="#9c27b0"/>
    <text x="1030" y="103" font-size="10" fill="#333">Entidades de Relación</text>
    
    <rect x="1010" y="110" width="15" height="10" fill="#e8f5e9" stroke="#4caf50"/>
    <text x="1030" y="118" font-size="10" fill="#333">Entidades de Datos</text>
    
    <rect x="1010" y="125" width="15" height="10" fill="#fff3e0" stroke="#ff9800"/>
    <text x="1030" y="133" font-size="10" fill="#333">Auditoría (ChangeLog)</text>
    
    <rect x="1010" y="140" width="15" height="10" fill="#ffebee" stroke="#f44336"/>
    <text x="1030" y="148" font-size="10" fill="#333">Alertas y Notificaciones</text>
    
    <line x1="1010" y1="160" x2="1025" y2="160" stroke="#2196f3" stroke-width="2"/>
    <text x="1030" y="163" font-size="10" fill="#333">Relación 1:N</text>
    
    <line x1="1010" y1="175" x2="1025" y2="175" stroke="#ff5722" stroke-width="2" stroke-dasharray="3,3"/>
    <text x="1030" y="178" font-size="10" fill="#333">Relación N:M</text>
    
    <line x1="1010" y1="190" x2="1025" y2="190" stroke="#f44336" stroke-width="2"/>
    <text x="1030" y="193" font-size="10" fill="#333">Relación de Alerta</text>
    
    <text x="1010" y="210" font-size="10" fill="#1b5e20" font-weight="bold">🔑 Clave Primaria</text>
    <text x="1010" y="225" font-size="10" fill="#d32f2f" font-weight="bold">🔗 Clave Foránea</text>
    <text x="1010" y="240" font-size="10" fill="#f57c00" font-weight="bold">⭐ Campo Único</text>
    <text x="1010" y="255" font-size="10" fill="#333">📝 Campo Regular</text>
    <text x="1010" y="270" font-size="10" fill="#666">🕒 Timestamps</text>
    <text x="1010" y="285" font-size="10" fill="#9c27b0">🚨 Alertas Activas</text>
    <text x="1010" y="300" font-size="10" fill="#ff9800">📋 Seguimiento</text>
  </g>
  
  <!-- Title -->
  <text x="600" y="30" text-anchor="middle" class="table-title" font-size="18">Esquema de Base de Datos - Sistema de Planificación AkGroup</text>
  
  <!-- Notes -->
  <g id="notes">
    <rect x="50" y="700" width="900" height="160" fill="#f8f9fa" stroke="#6c757d" stroke-width="1" rx="5"/>
    <text x="60" y="720" font-weight="bold" font-size="12" fill="#495057">NOTAS IMPORTANTES - REQUERIMIENTOS DEL CLIENTE:</text>
    
    <text x="60" y="740" font-size="10" fill="#6c757d">• EMPLOYEE incluye cualificaciones (HN1, HN2, etc.) y gestión de disponibilidad incierta</text>
    <text x="60" y="755" font-size="10" fill="#6c757d">• PROJECT maneja trigramas únicos para identificación rápida de proyectos</text>
    <text x="60" y="770" font-size="10" fill="#6c757d">• STATUS_CODE permite configuración manual de códigos con colores personalizables</text>
    <text x="60" y="785" font-size="10" fill="#6c757d">• SCHEDULE incluye validación de días laborables/festivos y cálculo automático de tiempo de intervención</text>
    <text x="60" y="800" font-size="10" fill="#6c757d">• CHANGE_LOG registra todos los cambios críticos con usuario, timestamp y detalles completos</text>
    <text x="60" y="815" font-size="10" fill="#6c757d">• ALERT genera notificaciones automáticas por personal insuficiente, conflictos y cambios críticos</text>
    <text x="60" y="830" font-size="10" fill="#6c757d">• Sistema optimizado para búsquedas por cualificación, alertas activas y seguimiento de cambios</text>
    <text x="60" y="845" font-size="10" fill="#6c757d">• Soporte completo para indicadores visuales de estado (verde=en sitio, azul=viajando, etc.)</text>
  </g>
  
</svg>